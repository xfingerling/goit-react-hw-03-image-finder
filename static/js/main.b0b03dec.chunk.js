(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,a,t){e.exports={overlay:"Modal_overlay__381RK",modal:"Modal_modal__31NiG"}},22:function(e,a,t){e.exports={galleryApp:"GalleryApp_galleryApp__22331"}},24:function(e,a,t){e.exports={imageGallery:"ImageGallery_imageGallery__3dymQ"}},27:function(e,a,t){e.exports={button:"Button_button__1U5OJ"}},28:function(e,a,t){e.exports=t(74)},33:function(e,a,t){},7:function(e,a,t){e.exports={searchbar:"Searchbar_searchbar__39wbd",searchForm:"Searchbar_searchForm__2naT0",searchFormButton:"Searchbar_searchFormButton__3E53N",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__1pyRd",searchFormInput:"Searchbar_searchFormInput__3BU5H"}},74:function(e,a,t){"use strict";t.r(a);var n=t(3),r=t(4),o=t(5),c=t(6),l=t(0),i=t.n(l),s=t(21),m=(t(33),t(11)),u=t(22),h=t.n(u),p=t(23),g=t.n(p),d=(t(55),t(7)),f=t.n(d),y=function(e){var a=e.onSubmit;return i.a.createElement("header",{className:f.a.searchbar},i.a.createElement("form",{className:f.a.searchForm,onSubmit:a},i.a.createElement("button",{type:"submit",className:f.a.searchFormButton},i.a.createElement("span",{className:f.a.searchFormButtonLabel},"Search")),i.a.createElement("input",{name:"query",className:f.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})))},b=t(24),v=t.n(b),_=t(8),I=t.n(_),O=t(25),E=t(26),L=t.n(E),k={page:1,perPage:12,fetchImg:function(e){var a=this;return Object(O.a)(I.a.mark((function t(){var n,r,o;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="&q=".concat(e,"&page=").concat(a.page,"&per_page=").concat(a.perPage,"&image_type=all&orientation=horizontal"),t.next=3,L.a.get("https://pixabay.com/api/?key=15581732-f0b235014b6a569c91699f2a7"+n);case 3:return r=t.sent,o=r.data,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))()},incrementPage:function(){this.page+=1},resetPage:function(){this.page=1}},j=t(9),w=t.n(j),M=function(e){var a=e.src,t=e.largeImageURL,n=e.onModalOpen;return i.a.createElement("li",{className:w.a.imageGalleryItem},i.a.createElement("img",{src:a,alt:"",className:w.a.imageGalleryItemImage,onClick:function(){n(t)}}))},C=function(e){Object(c.a)(t,e);var a=Object(o.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).listRef=Object(l.createRef)(),e}return Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){var a=this.listRef.current;if(a&&e.imgs!==this.props.imgs){var t=k.page*k.perPage-k.perPage;a.children[t].scrollIntoView({behavior:"smooth",block:"start"})}}},{key:"render",value:function(){var e=this.props,a=e.imgs,t=e.onModalOpen,n=a.map((function(e){return i.a.createElement(M,{key:e.id,src:e.webformatURL,largeImageURL:e.largeImageURL,onModalOpen:t})}));return i.a.createElement("ul",{ref:this.listRef,className:v.a.imageGallery},n)}}]),t}(l.Component),S=t(27),R=t.n(S),U=function(e){var a=e.onLoadMore;return i.a.createElement("button",{className:R.a.button,onClick:a},"Load More")},G=t(10),N=t.n(G),x=function(e){Object(c.a)(t,e);var a=Object(o.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).handleKeyPress=function(a){"Escape"===a.code&&e.props.onModalClose()},e.handleBackdropClick=function(a){a.currentTarget===a.target&&e.props.onModalClose()},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.props.largeImageURL;return i.a.createElement("div",{className:N.a.overlay,onClick:this.handleBackdropClick},i.a.createElement("div",{className:N.a.modal},i.a.createElement("img",{src:e,alt:""})))}}]),t}(l.Component),F=function(e){Object(c.a)(t,e);var a=Object(o.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).state={query:"",imgs:[],modalIsOpen:!1,largeImageURL:"",isLoading:!1},e.handleLoadMore=function(){var a=e.state.query;k.incrementPage(),k.fetchImg(a).then((function(a){var t=a.hits;return e.setState((function(e){return{imgs:[].concat(Object(m.a)(e.imgs),Object(m.a)(t))}}))}))},e.handleQueryChange=function(a){a.preventDefault(),e.setState({query:a.target.query.value}),a.target.query.value=""},e.handleModalOpen=function(a){e.setState({modalIsOpen:!0,largeImageURL:a})},e.handleModalClose=function(){e.setState({modalIsOpen:!1,largeImageURL:""})},e}return Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,a){var t=this,n=this.state,r=n.query;n.imgs;a.query!==r&&(k.resetPage(),this.setState({isLoading:!0}),k.fetchImg(r).then((function(e){var a=e.hits;return t.setState({imgs:a})})).catch((function(e){return console.error(e)})).finally((function(){return t.setState({isLoading:!1})}))),a.imgs}},{key:"render",value:function(){var e=this.state,a=e.imgs,t=e.modalIsOpen,n=e.largeImageURL,r=e.isLoading;return i.a.createElement("div",{className:h.a.galleryApp},i.a.createElement(y,{onSubmit:this.handleQueryChange}),a.length>0&&i.a.createElement(C,{imgs:a,onModalOpen:this.handleModalOpen}),a.length>0&&i.a.createElement(U,{onLoadMore:this.handleLoadMore}),t&&i.a.createElement(x,{largeImageURL:n,onModalClose:this.handleModalClose}),r&&i.a.createElement(g.a,{type:"ThreeDots",color:"#3f51b5",height:100,width:100}))}}]),t}(l.Component),B=function(e){Object(c.a)(t,e);var a=Object(o.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(F,null)}}]),t}(l.Component);Object(s.render)(i.a.createElement(B,null),document.getElementById("root"))},9:function(e,a,t){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__2vmxx",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__31JXL"}}},[[28,1,2]]]);
//# sourceMappingURL=main.b0b03dec.chunk.js.map