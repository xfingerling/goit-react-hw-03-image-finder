(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,a,t){e.exports={overlay:"Modal_overlay__381RK",modal:"Modal_modal__31NiG"}},22:function(e,a,t){e.exports={galleryApp:"GalleryApp_galleryApp__22331"}},23:function(e,a,t){e.exports={imageGallery:"ImageGallery_imageGallery__3dymQ"}},26:function(e,a,t){e.exports={button:"Button_button__1U5OJ"}},27:function(e,a,t){e.exports={wrapperLoader:"Loader_wrapperLoader__74itm"}},29:function(e,a,t){e.exports=t(75)},34:function(e,a,t){},7:function(e,a,t){e.exports={searchbar:"Searchbar_searchbar__39wbd",searchForm:"Searchbar_searchForm__2naT0",searchFormButton:"Searchbar_searchFormButton__3E53N",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__1pyRd",searchFormInput:"Searchbar_searchFormInput__3BU5H"}},75:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(21),c=(t(34),t(11)),l=t(3),i=t(4),s=t(5),u=t(6),m=t(22),h=t.n(m),p=t(7),g=t.n(p),d=function(e){var a=e.onSubmit;return r.a.createElement("header",{className:g.a.searchbar},r.a.createElement("form",{className:g.a.searchForm,onSubmit:a},r.a.createElement("button",{type:"submit",className:g.a.searchFormButton},r.a.createElement("span",{className:g.a.searchFormButtonLabel},"Search")),r.a.createElement("input",{name:"query",className:g.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})))},f=t(23),y=t.n(f),v=t(8),b=t.n(v),_=t(24),I=t(25),E=t.n(I),L={page:1,perPage:12,fetchImg:function(e){var a=this;return Object(_.a)(b.a.mark((function t(){var n,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="&q=".concat(e,"&page=").concat(a.page,"&per_page=").concat(a.perPage,"&image_type=all&orientation=horizontal"),t.next=3,E.a.get("https://pixabay.com/api/?key=15581732-f0b235014b6a569c91699f2a7"+n);case 3:return r=t.sent,o=r.data,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))()},incrementPage:function(){this.page+=1},resetPage:function(){this.page=1}},O=t(9),w=t.n(O),k=function(e){var a=e.src,t=e.onModalOpen,n=e.alt;return r.a.createElement("li",{className:w.a.imageGalleryItem},r.a.createElement("img",{src:a,alt:n,className:w.a.imageGalleryItemImage,onClick:t}))},M=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).listRef=Object(n.createRef)(),e}return Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){var a=this.listRef.current;if(window.pageYOffset&&a&&e.imgs!==this.props.imgs){var t=L.page*L.perPage-L.perPage;a.children[t].scrollIntoView({behavior:"smooth",block:"start"})}}},{key:"render",value:function(){var e=this.props,a=e.imgs,t=e.onModalOpen,n=a.map((function(e){var a=e.id,n=e.webformatURL,o=e.largeImageURL,c=e.tags;return r.a.createElement(k,{key:a,src:n,alt:c,onModalOpen:function(){return t(o)}})}));return r.a.createElement("ul",{ref:this.listRef,className:y.a.imageGallery},n)}}]),t}(n.Component),S=t(26),j=t.n(S),C=function(e){var a=e.onLoadMore;return r.a.createElement("button",{className:j.a.button,onClick:a},"Load More")},N=t(10),F=t.n(N),G=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).handleKeyPress=function(a){"Escape"===a.code&&e.props.onModalClose()},e.handleBackdropClick=function(a){a.currentTarget===a.target&&e.props.onModalClose()},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.props.largeImageURL;return r.a.createElement("div",{className:F.a.overlay,onClick:this.handleBackdropClick},r.a.createElement("div",{className:F.a.modal},r.a.createElement("img",{src:e,alt:"anything"})))}}]),t}(n.Component),R=t(27),U=t.n(R),x=t(28),B=t.n(x),P=(t(74),function(){return r.a.createElement("div",{className:U.a.wrapperLoader},r.a.createElement(B.a,{type:"ThreeDots",color:"#3f51b5",height:80,width:80}))}),q=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={query:"",imgs:[],modalIsOpen:!1,largeImageURL:"",isLoading:!1},e.fetchImg=function(a){L.fetchImg(a).then((function(a){var t=a.hits;return e.setState({imgs:t})})).catch((function(e){return console.error(e)})).finally((function(){return e.setState({isLoading:!1})}))},e.handleLoadMore=function(){var a=e.state.query;L.incrementPage(),e.setState({isLoading:!0}),L.fetchImg(a).then((function(a){var t=a.hits;return e.setState((function(e){return{imgs:[].concat(Object(c.a)(e.imgs),Object(c.a)(t))}}))})).catch((function(e){return console.error(e)})).finally((function(){return e.setState({isLoading:!1})}))},e.handleQueryChange=function(a){a.preventDefault();var t=a.target.query;e.setState({query:t.value}),t.value=""},e.handleModalOpen=function(a){e.setState({modalIsOpen:!0,largeImageURL:a})},e.handleModalClose=function(){e.setState({modalIsOpen:!1,largeImageURL:""})},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.query;this.setState({isLoading:!0}),this.fetchImg(e)}},{key:"componentDidUpdate",value:function(e,a){var t=this.state.query;a.query!==t&&(L.resetPage(),this.setState({isLoading:!0}),this.fetchImg(t))}},{key:"render",value:function(){var e=this.state,a=e.imgs,t=e.modalIsOpen,n=e.largeImageURL,o=e.isLoading;return r.a.createElement("div",{className:h.a.galleryApp},r.a.createElement(d,{onSubmit:this.handleQueryChange}),!!a.length&&r.a.createElement(M,{imgs:a,onModalOpen:this.handleModalOpen}),!!a.length&&r.a.createElement(C,{onLoadMore:this.handleLoadMore}),t&&r.a.createElement(G,{largeImageURL:n,onModalClose:this.handleModalClose}),o&&r.a.createElement(P,null))}}]),t}(n.Component),A=function(){return r.a.createElement(q,null)};Object(o.render)(r.a.createElement(A,null),document.getElementById("root"))},9:function(e,a,t){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__2FYbl",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__2E9Wi"}}},[[29,1,2]]]);
//# sourceMappingURL=main.4cdc469f.chunk.js.map