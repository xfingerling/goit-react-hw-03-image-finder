(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,a,t){e.exports={overlay:"Modal_overlay__381RK",modal:"Modal_modal__31NiG"}},22:function(e,a,t){e.exports={galleryApp:"GalleryApp_galleryApp__22331"}},23:function(e,a,t){e.exports={imageGallery:"ImageGallery_imageGallery__3dymQ"}},26:function(e,a,t){e.exports={button:"Button_button__1U5OJ"}},27:function(e,a,t){e.exports={wrapperLoader:"Loader_wrapperLoader__74itm"}},29:function(e,a,t){e.exports=t(75)},34:function(e,a,t){},7:function(e,a,t){e.exports={searchbar:"Searchbar_searchbar__39wbd",searchForm:"Searchbar_searchForm__2naT0",searchFormButton:"Searchbar_searchFormButton__3E53N",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__1pyRd",searchFormInput:"Searchbar_searchFormInput__3BU5H"}},75:function(e,a,t){"use strict";t.r(a);var n=t(3),r=t(4),o=t(5),c=t(6),l=t(0),i=t.n(l),s=t(21),u=(t(34),t(11)),m=t(22),h=t.n(m),p=t(7),g=t.n(p),d=function(e){var a=e.onSubmit;return i.a.createElement("header",{className:g.a.searchbar},i.a.createElement("form",{className:g.a.searchForm,onSubmit:a},i.a.createElement("button",{type:"submit",className:g.a.searchFormButton},i.a.createElement("span",{className:g.a.searchFormButtonLabel},"Search")),i.a.createElement("input",{name:"query",className:g.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})))},f=t(23),y=t.n(f),v=t(8),b=t.n(v),_=t(24),I=t(25),O=t.n(I),L={page:1,perPage:12,fetchImg:function(e){var a=this;return Object(_.a)(b.a.mark((function t(){var n,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="&q=".concat(e,"&page=").concat(a.page,"&per_page=").concat(a.perPage,"&image_type=all&orientation=horizontal"),t.next=3,O.a.get("https://pixabay.com/api/?key=15581732-f0b235014b6a569c91699f2a7"+n);case 3:return r=t.sent,o=r.data,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))()},incrementPage:function(){this.page+=1},resetPage:function(){this.page=1}},E=t(9),k=t.n(E),w=function(e){var a=e.src,t=e.onModalOpen,n=e.alt;return i.a.createElement("li",{className:k.a.imageGalleryItem},i.a.createElement("img",{src:a,alt:n,className:k.a.imageGalleryItemImage,onClick:t}))},j=function(e){Object(c.a)(t,e);var a=Object(o.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).listRef=Object(l.createRef)(),e}return Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){var a=this.listRef.current;if(a&&e.imgs!==this.props.imgs){var t=L.page*L.perPage-L.perPage;a.children[t].scrollIntoView({behavior:"smooth",block:"start"})}}},{key:"render",value:function(){var e=this.props,a=e.imgs,t=e.onModalOpen,n=a.map((function(e){var a=e.id,n=e.webformatURL,r=e.largeImageURL,o=e.tags;return i.a.createElement(w,{key:a,src:n,alt:o,onModalOpen:function(){return t(r)}})}));return i.a.createElement("ul",{ref:this.listRef,className:y.a.imageGallery},n)}}]),t}(l.Component),M=t(26),S=t.n(M),C=function(e){var a=e.onLoadMore;return i.a.createElement("button",{className:S.a.button,onClick:a},"Load More")},N=t(10),x=t.n(N),G=function(e){Object(c.a)(t,e);var a=Object(o.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).handleKeyPress=function(a){"Escape"===a.code&&e.props.onModalClose()},e.handleBackdropClick=function(a){a.currentTarget===a.target&&e.props.onModalClose()},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.props.largeImageURL;return i.a.createElement("div",{className:x.a.overlay,onClick:this.handleBackdropClick},i.a.createElement("div",{className:x.a.modal},i.a.createElement("img",{src:e,alt:"anything"})))}}]),t}(l.Component),R=t(27),F=t.n(R),U=t(28),B=t.n(U),P=(t(74),function(){return i.a.createElement("div",{className:F.a.wrapperLoader},i.a.createElement(B.a,{type:"ThreeDots",color:"#3f51b5",height:80,width:80}))}),q=function(e){Object(c.a)(t,e);var a=Object(o.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).state={query:"",imgs:[],modalIsOpen:!1,largeImageURL:"",isLoading:!1},e.fetchImg=function(a){L.fetchImg(a).then((function(a){var t=a.hits;return e.setState({imgs:t})})).catch((function(e){return console.error(e)})).finally((function(){return e.setState({isLoading:!1})}))},e.handleLoadMore=function(){var a=e.state.query;L.incrementPage(),e.setState({isLoading:!0}),L.fetchImg(a).then((function(a){var t=a.hits;return e.setState((function(e){return{imgs:[].concat(Object(u.a)(e.imgs),Object(u.a)(t))}}))})).catch((function(e){return console.error(e)})).finally((function(){return e.setState({isLoading:!1})}))},e.handleQueryChange=function(a){a.preventDefault();var t=a.target.query;e.setState({query:t.value}),t.value=""},e.handleModalOpen=function(a){e.setState({modalIsOpen:!0,largeImageURL:a})},e.handleModalClose=function(){e.setState({modalIsOpen:!1,largeImageURL:""})},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.query;this.setState({isLoading:!0}),this.fetchImg(e)}},{key:"componentDidUpdate",value:function(e,a){var t=this.state.query;a.query!==t&&(L.resetPage(),this.setState({isLoading:!0}),this.fetchImg(t))}},{key:"render",value:function(){var e=this.state,a=e.imgs,t=e.modalIsOpen,n=e.largeImageURL,r=e.isLoading;return i.a.createElement("div",{className:h.a.galleryApp},i.a.createElement(d,{onSubmit:this.handleQueryChange}),!!a.length&&i.a.createElement(j,{imgs:a,onModalOpen:this.handleModalOpen}),!!a.length&&i.a.createElement(C,{onLoadMore:this.handleLoadMore}),t&&i.a.createElement(G,{largeImageURL:n,onModalClose:this.handleModalClose}),r&&i.a.createElement(P,null))}}]),t}(l.Component),A=function(e){Object(c.a)(t,e);var a=Object(o.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(q,null)}}]),t}(l.Component);Object(s.render)(i.a.createElement(A,null),document.getElementById("root"))},9:function(e,a,t){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__2vmxx",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__31JXL"}}},[[29,1,2]]]);
//# sourceMappingURL=main.2e505106.chunk.js.map